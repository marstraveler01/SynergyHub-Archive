local a=game:GetService("RunService")local b=game:GetService("Players")local c=game:GetService("Workspace")local d=b.LocalPlayer;local e=c.CurrentCamera;local f=e.ViewportSize;local g=Instance.new("Folder",gethui and gethui()or game:GetService("CoreGui"))local h=math.floor;local i=math.round;local j=math.sin;local k=math.cos;local l=table.clear;local m=table.unpack;local n=table.find;local o=table.create;local p=CFrame.fromMatrix;local q=e.WorldToViewportPoint;local r=c.IsA;local s=c.GetPivot;local t=c.FindFirstChild;local u=c.FindFirstChildOfClass;local c=c.GetChildren;local v=CFrame.identity.ToOrientation;local v=CFrame.identity.PointToObjectSpace;local w=Color3.new().Lerp;local x=Vector2.zero.Min;local y=Vector2.zero.Max;local z=Vector2.zero.Lerp;local A=Vector3.zero.Min;local B=Vector3.zero.Max;local C=Vector2.new(5,0)local D=Vector2.new(3,0)local E=Vector2.new(0,1)local F=Vector2.new(0,2)local G=Vector2.new(0,2)local H={Vector3.new(-1,-1,-1),Vector3.new(-1,1,-1),Vector3.new(-1,1,1),Vector3.new(-1,-1,1),Vector3.new(1,-1,-1),Vector3.new(1,1,-1),Vector3.new(1,1,1),Vector3.new(1,-1,1)}local function I(a)return a=="Head"or a:find("Torso")or a:find("Leg")or a:find("Arm")end;local function J(a)local b,c;for d=1,#a do local a=a[d]local a,d=a.CFrame,a.Size;b=A(b or a.Position,(a-d*0.5).Position)c=B(c or a.Position,(a+d*0.5).Position)end;local a=(b+c)*0.5;local d=Vector3.new(a.X,a.Y,c.Z)return CFrame.new(a,d),c-b end;local function A(a)local a,b=q(e,a)return Vector2.new(a.X,a.Y),b,a.Z end;local function q(a,b)local c=o(#H)for d=1,#H do c[d]=A((a+b*0.5*H[d]).Position)end;local a=x(f,m(c))local b=y(Vector2.zero,m(c))return{corners=c,topLeft=Vector2.new(h(a.X),h(a.Y)),topRight=Vector2.new(h(b.X),h(a.Y)),bottomLeft=Vector2.new(h(a.X),h(b.Y)),bottomRight=Vector2.new(h(b.X),h(b.Y))}end;local function h(a,b)local a,c=a.X,a.Y;local b,d=k(b),j(b)return Vector2.new(a*b-c*d,a*d+c*b)end;local function j(a,b,c)if b=="Team Color"or(a.interface.sharedSettings.useTeamColor and not c)then return a.interface.getTeamColor(a.player)or Color3.new(1,1,1)end;return b end;local k={}k.__index=k;function k.new(a,b)local c=setmetatable({},k)c.player=assert(a,"Missing argument #1 (Player expected)")c.interface=assert(b,"Missing argument #2 (table expected)")c:Construct()return c end;function k:_create(a,b)local a=Drawing.new(a)for b,c in next,b do pcall(function()a[b]=c end)end;self.bin[#self.bin+1]=a;return a end;function k:Construct()self.charCache={}self.childCount=0;self.bin={}self.drawings={box3d={{self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false})},{self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false})},{self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false})},{self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false}),self:_create("Line",{Thickness=1,Visible=false})}},visible={tracerOutline=self:_create("Line",{Thickness=3,Visible=false}),tracer=self:_create("Line",{Thickness=1,Visible=false}),boxFill=self:_create("Square",{Filled=true,Visible=false}),boxOutline=self:_create("Square",{Thickness=3,Visible=false}),box=self:_create("Square",{Thickness=1,Visible=false}),healthBarOutline=self:_create("Line",{Thickness=3,Visible=false}),healthBar=self:_create("Line",{Thickness=1,Visible=false}),healthText=self:_create("Text",{Center=true,Visible=false}),name=self:_create("Text",{Text=self.player.DisplayName,Center=true,Visible=false}),distance=self:_create("Text",{Center=true,Visible=false}),weapon=self:_create("Text",{Center=true,Visible=false})},hidden={arrowOutline=self:_create("Triangle",{Thickness=3,Visible=false}),arrow=self:_create("Triangle",{Filled=true,Visible=false})}}self.renderConnection=a.Heartbeat:Connect(function(a)self:Update(a)self:Render(a)end)end;function k:Destruct()self.renderConnection:Disconnect()for a=1,#self.bin do self.bin[a]:Remove()end;l(self)end;function k:Update()local a=self.interface;self.options=a.teamSettings[a.isFriendly(self.player)and"friendly"or"enemy"]self.character=a.getCharacter(self.player)self.health,self.maxHealth=a.getHealth(self.player)self.weapon=a.getWeapon(self.player)self.enabled=self.options.enabled and self.character and not(#a.whitelist>0 and not n(a.whitelist,self.player.UserId))local b=self.enabled and t(self.character,"Head")if not b then self.charCache={}self.onScreen=false;return end;local d,d,f=A(b.Position)self.onScreen=d;self.distance=f;if a.sharedSettings.limitDistance and f>a.sharedSettings.maxDistance then self.onScreen=false end;if self.onScreen then local a=self.charCache;local b=c(self.character)if not a[1]or self.childCount~=#b then l(a)for c=1,#b do local b=b[c]if r(b,"BasePart")and I(b.Name)then a[#a+1]=b end end;self.childCount=#b end;self.corners=q(J(a))elseif self.options.offScreenArrow then local a=e.CFrame;local a=p(a.Position,a.RightVector,Vector3.yAxis)local a=v(a,b.Position)self.direction=Vector2.new(a.X,a.Z).Unit end end;function k:Render()local a=self.onScreen or false;local b=self.enabled or false;local c=self.drawings.visible;local d=self.drawings.hidden;local e=self.drawings.box3d;local g=self.interface;local k=self.options;local l=self.corners;c.box.Visible=b and a and k.box;c.boxOutline.Visible=c.box.Visible and k.boxOutline;if c.box.Visible then local a=c.box;a.Position=l.topLeft;a.Size=l.bottomRight-l.topLeft;a.Color=j(self,k.boxColor[1])a.Transparency=k.boxColor[2]local b=c.boxOutline;b.Position=a.Position;b.Size=a.Size;b.Color=j(self,k.boxOutlineColor[1],true)b.Transparency=k.boxOutlineColor[2]end;c.boxFill.Visible=b and a and k.boxFill;if c.boxFill.Visible then local a=c.boxFill;a.Position=l.topLeft;a.Size=l.bottomRight-l.topLeft;a.Color=j(self,k.boxFillColor[1])a.Transparency=k.boxFillColor[2]end;c.healthBar.Visible=b and a and k.healthBar;c.healthBarOutline.Visible=c.healthBar.Visible and k.healthBarOutline;if c.healthBar.Visible then local a=l.topLeft-C;local b=l.bottomLeft-C;local d=c.healthBar;d.To=b;d.From=z(b,a,self.health/self.maxHealth)d.Color=w(k.dyingColor,k.healthyColor,self.health/self.maxHealth)local c=c.healthBarOutline;c.To=b+E;c.From=a-E;c.Color=j(self,k.healthBarOutlineColor[1],true)c.Transparency=k.healthBarOutlineColor[2]end;c.healthText.Visible=b and a and k.healthText;if c.healthText.Visible then local a=l.topLeft-C;local b=l.bottomLeft-C;local c=c.healthText;c.Text=i(self.health).."hp"c.Size=g.sharedSettings.textSize;c.Font=g.sharedSettings.textFont;c.Color=j(self,k.healthTextColor[1])c.Transparency=k.healthTextColor[2]c.Outline=k.healthTextOutline;c.OutlineColor=j(self,k.healthTextOutlineColor,true)c.Position=z(b,a,self.health/self.maxHealth)-c.TextBounds*0.5-D end;c.name.Visible=b and a and k.name;if c.name.Visible then local a=c.name;a.Size=g.sharedSettings.textSize;a.Font=g.sharedSettings.textFont;a.Color=j(self,k.nameColor[1])a.Transparency=k.nameColor[2]a.Outline=k.nameOutline;a.OutlineColor=j(self,k.nameOutlineColor,true)a.Position=(l.topLeft+l.topRight)*0.5-Vector2.yAxis*a.TextBounds.Y-F end;c.distance.Visible=b and a and self.distance and k.distance;if c.distance.Visible then local a=c.distance;a.Text=i(self.distance).." studs"a.Size=g.sharedSettings.textSize;a.Font=g.sharedSettings.textFont;a.Color=j(self,k.distanceColor[1])a.Transparency=k.distanceColor[2]a.Outline=k.distanceOutline;a.OutlineColor=j(self,k.distanceOutlineColor,true)a.Position=(l.bottomLeft+l.bottomRight)*0.5+G end;c.weapon.Visible=b and a and k.weapon;if c.weapon.Visible then local a=c.weapon;a.Text=self.weapon;a.Size=g.sharedSettings.textSize;a.Font=g.sharedSettings.textFont;a.Color=j(self,k.weaponColor[1])a.Transparency=k.weaponColor[2]a.Outline=k.weaponOutline;a.OutlineColor=j(self,k.weaponOutlineColor,true)a.Position=(l.bottomLeft+l.bottomRight)*0.5+(c.distance.Visible and G+Vector2.yAxis*c.distance.TextBounds.Y or Vector2.zero)end;c.tracer.Visible=b and a and k.tracer;c.tracerOutline.Visible=c.tracer.Visible and k.tracerOutline;if c.tracer.Visible then local a=c.tracer;a.Color=j(self,k.tracerColor[1])a.Transparency=k.tracerColor[2]a.To=(l.bottomLeft+l.bottomRight)*0.5;a.From=k.tracerOrigin=="Middle"and f*0.5 or k.tracerOrigin=="Top"and f*Vector2.new(0.5,0)or k.tracerOrigin=="Bottom"and f*Vector2.new(0.5,1)local b=c.tracerOutline;b.Color=j(self,k.tracerOutlineColor[1],true)b.Transparency=k.tracerOutlineColor[2]b.To=a.To;b.From=a.From end;d.arrow.Visible=b and(not a)and k.offScreenArrow;d.arrowOutline.Visible=d.arrow.Visible and k.offScreenArrowOutline;if d.arrow.Visible and self.direction then local a=d.arrow;a.PointA=x(y(f*0.5+self.direction*k.offScreenArrowRadius,Vector2.one*25),f-Vector2.one*25)a.PointB=a.PointA-h(self.direction,0.45)*k.offScreenArrowSize;a.PointC=a.PointA-h(self.direction,-0.45)*k.offScreenArrowSize;a.Color=j(self,k.offScreenArrowColor[1])a.Transparency=k.offScreenArrowColor[2]local b=d.arrowOutline;b.PointA=a.PointA;b.PointB=a.PointB;b.PointC=a.PointC;b.Color=j(self,k.offScreenArrowOutlineColor[1],true)b.Transparency=k.offScreenArrowOutlineColor[2]end;local a=b and a and k.box3d;for b=1,#e do local c=e[b]for b=1,#c do local b=c[b]b.Visible=a;b.Color=j(self,k.box3dColor[1])b.Transparency=k.box3dColor[2]end;if a then local a=c[1]a.From=l.corners[b]a.To=l.corners[b==4 and 1 or b+1]local a=c[2]a.From=l.corners[b==4 and 1 or b+1]a.To=l.corners[b==4 and 5 or b+5]local a=c[3]a.From=l.corners[b==4 and 5 or b+5]a.To=l.corners[b==4 and 8 or b+4]end end end;local c={}c.__index=c;function c.new(a,b)local c=setmetatable({},c)c.player=assert(a,"Missing argument #1 (Player expected)")c.interface=assert(b,"Missing argument #2 (table expected)")c:Construct()return c end;function c:Construct()self.highlight=Instance.new("Highlight",g)self.updateConnection=a.Heartbeat:Connect(function()self:Update()end)end;function c:Destruct()self.updateConnection:Disconnect()self.highlight:Destroy()l(self)end;function c:Update()local a=self.highlight;local b=self.interface;local c=b.getCharacter(self.player)local d=b.teamSettings[b.isFriendly(self.player)and"friendly"or"enemy"]local b=d.enabled and c and not(#b.whitelist>0 and not n(b.whitelist,self.player.UserId))a.Enabled=b and d.chams;if a.Enabled then a.Adornee=c;a.FillColor=j(self,d.chamsFillColor[1])a.FillTransparency=d.chamsFillColor[2]a.OutlineColor=j(self,d.chamsOutlineColor[1],true)a.OutlineTransparency=d.chamsOutlineColor[2]a.DepthMode=d.chamsVisibleOnly and"Occluded"or"AlwaysOnTop"end end;local e={}e.__index=e;function e.new(a,b)local c=setmetatable({},e)c.instance=assert(a,"Missing argument #1 (Instance Expected)")c.options=assert(b,"Missing argument #2 (table expected)")c:Construct()return c end;function e:Construct()local b=self.options;b.enabled=b.enabled==nil and true or b.enabled;b.text=b.text or"{name}"b.textColor=b.textColor or{Color3.new(1,1,1),1}b.textOutline=b.textOutline==nil and true or b.textOutline;b.textOutlineColor=b.textOutlineColor or Color3.new()b.textSize=b.textSize or 13;b.textFont=b.textFont or 2;b.limitDistance=b.limitDistance or false;b.maxDistance=b.maxDistance or 150;self.text=Drawing.new("Text")self.text.Center=true;self.renderConnection=a.Heartbeat:Connect(function(a)self:Render(a)end)end;function e:Destruct()self.renderConnection:Disconnect()self.text:Remove()end;function e:Render()local a=self.instance;if not a or not a.Parent then return self:Destruct()end;local b=self.text;local c=self.options;if not c.enabled then b.Visible=false;return end;local d=s(a).Position;local e,f,g=A(d)if c.limitDistance and g>c.maxDistance then f=false end;b.Visible=f;if b.Visible then b.Position=e;b.Color=c.textColor[1]b.Transparency=c.textColor[2]b.Outline=c.textOutline;b.OutlineColor=c.textOutlineColor;b.Size=c.textSize;b.Font=c.textFont;b.Text=c.text:gsub("{name}",a.Name):gsub("{distance}",i(g)):gsub("{position}",tostring(d))end end;local a={_hasLoaded=false,_objectCache={},whitelist={},sharedSettings={textSize=13,textFont=2,limitDistance=false,maxDistance=150,useTeamColor=false},teamSettings={enemy={enabled=false,box=false,boxColor={Color3.new(1,0,0),1},boxOutline=true,boxOutlineColor={Color3.new(),1},boxFill=false,boxFillColor={Color3.new(1,0,0),0.5},healthBar=false,healthyColor=Color3.new(0,1,0),dyingColor=Color3.new(1,0,0),healthBarOutline=true,healthBarOutlineColor={Color3.new(),0.5},healthText=false,healthTextColor={Color3.new(1,1,1),1},healthTextOutline=true,healthTextOutlineColor=Color3.new(),box3d=false,box3dColor={Color3.new(1,0,0),1},name=false,nameColor={Color3.new(1,1,1),1},nameOutline=true,nameOutlineColor=Color3.new(),weapon=false,weaponColor={Color3.new(1,1,1),1},weaponOutline=true,weaponOutlineColor=Color3.new(),distance=false,distanceColor={Color3.new(1,1,1),1},distanceOutline=true,distanceOutlineColor=Color3.new(),tracer=false,tracerOrigin="Bottom",tracerColor={Color3.new(1,0,0),1},tracerOutline=true,tracerOutlineColor={Color3.new(),1},offScreenArrow=false,offScreenArrowColor={Color3.new(1,1,1),1},offScreenArrowSize=15,offScreenArrowRadius=150,offScreenArrowOutline=true,offScreenArrowOutlineColor={Color3.new(),1},chams=false,chamsVisibleOnly=false,chamsFillColor={Color3.new(0.2,0.2,0.2),0.5},chamsOutlineColor={Color3.new(1,0,0),0}},friendly={enabled=false,box=false,boxColor={Color3.new(0,1,0),1},boxOutline=true,boxOutlineColor={Color3.new(),1},boxFill=false,boxFillColor={Color3.new(0,1,0),0.5},healthBar=false,healthyColor=Color3.new(0,1,0),dyingColor=Color3.new(1,0,0),healthBarOutline=true,healthBarOutlineColor={Color3.new(),0.5},healthText=false,healthTextColor={Color3.new(1,1,1),1},healthTextOutline=true,healthTextOutlineColor=Color3.new(),box3d=false,box3dColor={Color3.new(0,1,0),1},name=false,nameColor={Color3.new(1,1,1),1},nameOutline=true,nameOutlineColor=Color3.new(),weapon=false,weaponColor={Color3.new(1,1,1),1},weaponOutline=true,weaponOutlineColor=Color3.new(),distance=false,distanceColor={Color3.new(1,1,1),1},distanceOutline=true,distanceOutlineColor=Color3.new(),tracer=false,tracerOrigin="Bottom",tracerColor={Color3.new(0,1,0),1},tracerOutline=true,tracerOutlineColor={Color3.new(),1},offScreenArrow=false,offScreenArrowColor={Color3.new(1,1,1),1},offScreenArrowSize=15,offScreenArrowRadius=150,offScreenArrowOutline=true,offScreenArrowOutlineColor={Color3.new(),1},chams=false,chamsVisibleOnly=false,chamsFillColor={Color3.new(0.2,0.2,0.2),0.5},chamsOutlineColor={Color3.new(0,1,0),0}}}}function a.AddInstance(b,c)local a=a._objectCache;if a[b]then warn("Instance handler already exists.")else a[b]={e.new(b,c)}end;return a[b][1]end;function a.Load()assert(not a._hasLoaded,"Esp has already been loaded.")local function d(b)a._objectCache[b]={k.new(b,a),c.new(b,a)}end;local function c(b)local c=a._objectCache[b]if c then for a=1,#c do c[a]:Destruct()end;a._objectCache[b]=nil end end;local e=b:GetPlayers()for a=2,#e do d(e[a])end;a.playerAdded=b.PlayerAdded:Connect(d)a.playerRemoving=b.PlayerRemoving:Connect(c)a._hasLoaded=true end;function a.Unload()assert(a._hasLoaded,"Esp has not been loaded yet.")for b,c in next,a._objectCache do for a=1,#c do c[a]:Destruct()end;a._objectCache[b]=nil end;a.playerAdded:Disconnect()a.playerRemoving:Disconnect()a._hasLoaded=false end;function a.getWeapon(a)return"Unknown"end;function a.isFriendly(a)return a.Team and a.Team==d.Team end;function a.getTeamColor(a)return a.Team and a.Team.TeamColor and a.Team.TeamColor.Color end;function a.getCharacter(a)return a.Character end;function a.getHealth(b)local a=b and a.getCharacter(b)local a=a and u(a,"Humanoid")if a then return a.Health,a.MaxHealth end;return 100,100 end;return a
